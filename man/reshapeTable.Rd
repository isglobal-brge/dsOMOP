% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/05_reshape.R
\name{reshapeTable}
\alias{reshapeTable}
\title{Wide Format Reshaping for OMOP CDM Tables}
\usage{
reshapeTable(
  table,
  conceptIdColumn,
  mergeColumn,
  sequenceLongitudinal = FALSE,
  completeTimePoints = FALSE
)
}
\arguments{
\item{table}{A data frame containing OMOP CDM data to be reshaped}

\item{conceptIdColumn}{Character string specifying the concept ID column name that defines element types}

\item{mergeColumn}{Character string specifying the identifier column name (usually "person_id")}

\item{sequenceLongitudinal}{Logical indicating whether to sequence repeated measurements (default: FALSE)}

\item{completeTimePoints}{Logical indicating whether to ensure all entities have rows for each date (default: FALSE)}
}
\value{
A data frame in wide format where:
\itemize{
\item Rows represent unique entities (e.g., persons)
\item Columns combine concept types with original measurements
\item Column names are standardized and properly sequenced
}
}
\description{
Transforms an OMOP CDM table from long to wide format to facilitate merging with other tables
in the database. The function handles concept standardization, longitudinal data sequencing,
and column name reorganization.
}
\details{
Reshape OMOP CDM Table to Wide Format

The function performs several key operations:
\enumerate{
\item Validates the presence of required merge column
\item Completes time series data to ensure all entities have rows for each date
\item Optionally sequences longitudinal data to handle repeated measurements
\item Reshapes the table using DataSHIELD's reShapeDS function
\item Standardizes column names for consistency and readability
}

The reshaping process uses:
\itemize{
\item Merge column (typically person_id) as the identifier variable
\item Concept ID column as the time variable to characterize element types
\item Remaining columns as measurement variables
}

This transformation is essential for:
\itemize{
\item Creating person-centric views of the data
\item Facilitating joins between OMOP CDM tables
\item Handling repeated measurements properly
\item Maintaining data integrity during transformations
}
}
\examples{
\dontrun{
# Basic reshaping of a condition table
condition_data <- data.frame(
  person_id = c(1, 1, 2),
  condition_concept_id = c("diabetes", "hypertension", "diabetes"),
  start_date = as.Date(c("2020-01-01", "2020-02-01", "2020-03-01"))
)

# Reshape without longitudinal sequencing
wide_data <- reshapeTable(
  table = condition_data,
  conceptIdColumn = "condition_concept_id",
  mergeColumn = "person_id"
)

# Reshape with complete time points and longitudinal sequencing
wide_data_complete <- reshapeTable(
  table = condition_data,
  conceptIdColumn = "condition_concept_id",
  mergeColumn = "person_id",
  completeTimePoints = TRUE,
  sequenceLongitudinal = TRUE
)
}

}
